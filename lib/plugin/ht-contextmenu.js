!function(i,v){"use strict";var w="ht",S=i[w],l="position",e="absolute",n="px",N="left",Q="top",r="innerHTML",q="className",M="width",X="height",x="0",t="display",c="none",k="visibility",d="user-select",I="margin",h="padding",C=null,J=S.Color,L=S.Default,D=L.getInternal(),O=i.setTimeout,g=i.setInterval,A=i.clearTimeout,H=i.clearInterval,U=i.parseInt,o=L.isLeftButton,W=L.isDragging,$=L.startDragging,s=L.getDistance,E=L.isTouchable,V=J.widgetIconHighlight,y=J.widgetIconBorder,m=J.widgetIconGradient,u=function(){return document},R=function(K,O){return K.querySelectorAll(O)},f=function(p){var f=u().createElement(p);return"ul"===p&&(B(f,l,"relative"),B(f,I,x),B(f,h,x),B(f,"list-style",c),B(f,"box-sizing","border-box"),B(f,"-moz-box-sizing","border-box"),B(f,t,"inline-block"),B(f,"vertical-align","text-bottom"),B(f,"border","1px solid "+L.contextMenuBorderColor),B(f,"box-shadow","0 0 16px 1px "+L.contextMenuShadowColor),B(f,"overflow","hidden"),L.contextMenuBorderRadius&&B(f,"border-radius",L.contextMenuBorderRadius+n)),f},G=function(o){var C=o.touches[0];return C?C:o.changedTouches[0]},Z=function(){return f("div")},F=function(){return f("canvas")},B=function(s,p,F){s.style.setProperty(p,F,C)},_=function(q,A,G){L.def(S.widget[q],A,G)},b=function(j,c){j.appendChild(c)},T=function(k,S){k.removeChild(S)},z=function(n,l,q,O){n.addEventListener(l,q,!!O)},P=function(I,u,P,X){I.removeEventListener(u,P,!!X)};D.addMethod(L,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:y},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:V}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:y},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:V,gradient:L.imageGradient,gradientColor:m,background:V}]},contextMenuLabelFont:(E?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)",contextMenuBorderRadius:5,contextMenuSubmenuMark:"▶"},!0);var a=function(N){var J=this,f=N._view;if(J.$11b=N,J.addListeners(),z(f,"contextmenu",function(m){m.preventDefault()}),!E){var g=J.$37b=J.$36b.bind(J);z(f,"mouseover",g),z(f,"mouseout",g)}};L.def(a,v,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(R){if(L.preventDefault(R),o(R)){for(var F=this,i=F.$11b,w=F.getView(),j=w.children,h=0;h<j.length;h++){var t=j[h],M=t.$24b,q=t.$25b;if(M&&M.contains(R.target))return i.scrollUp(t),F.$28b=O(function(){F.$29b=g(function(){i.scrollUp(t)},100)},500),$(F,R),void 0;if(q&&q.contains(R.target))return i.scrollDown(t),F.$28b=O(function(){F.$29b=g(function(){i.scrollDown(t)},100)},500),$(F,R),void 0}E&&(R=G(R)),F.$30b={x:R.pageX,y:R.pageY}}},handle_mousedown:function(p){this.handle_touchstart(p)},handle_touchend:function(i){if(o(i)){var V=this,l=V.$30b,z=E?{x:G(i).pageX,y:G(i).pageY}:{x:i.pageX,y:i.pageY};if(!l||s(l,z)>1)return delete V.$30b,void 0;for(var d=V.getView(),m=V.$11b,L=i.target,M=C,W=C,g=m._items,b=d.$26b,y=0;y<b.length;y++)if(W=b[y],W.contains(L)){M=W.getAttribute("data-id");break}if(M&&g){var x=m.$17b(g,function(I){return I._id===M});if(x){var Y=!1;x.disabled instanceof Function?Y=x.disabled.call(m,x):x.disabled===!0&&(Y=!0),Y||(x.items?E&&V.$36b(W,!0):m.$1b(x,i))}}delete V.$30b}},$36b:function(s,_){if(!W()){var r,p=this,$=p.$11b,x=p.getView(),R=$.$20b||x.children[0],w=$.$19b,H=x.$26b,M=x.children,J=s.target,U=x.getBoundingClientRect(),b=L.getWindowInfo(),V=b.width,h=b.height,t=function(G){for(var Y=0;Y<M.length;Y++){var $=M[Y],n=new RegExp(G+"$"),w=$[q];if(w&&(n.test(w)||w.indexOf(G+" ")>=0))return $}},X=function(T){for(var E=0;E<H.length;E++){var $=H[E],f=new RegExp(T+"$"),Z=$[q];if(Z&&(f.test(Z)||Z.indexOf(T+" ")>=0))return $}},a=function(G){var y=X("menu-item"+G.$45b),P=y.getBoundingClientRect(),D=P.top-U.top,l=P.left-U.left;B(G,Q,D+n),B(G,N,l+P.width+n);var m=G.getBoundingClientRect(),R=m.top,H=m.left,f=m.height,E=m.width,c=R+f+2,F=H+E+2;c>h&&B(G,Q,D+h-c+n),F>V&&B(G,N,l-E+n)};if(_)r=s;else{if("mouseover"===s.type){for(var K=0;K<H.length;K++){var P=H[K];if(P.contains(J)){r=P;break}}if(!r&&w){var z=w.parentNode,I=t("submenu"+w.getAttribute("data-id"));(I&&I.contains(J)||z&&z.contains(J))&&(r=w)}}else if("mouseout"===s.type){for(var i=!1,D=s.relatedTarget,K=0;K<M.length;K++){var S=M[K];if("hidden"!==S.style.visibility&&S.contains(D)){i=!0;break}}if(i)return}!r&&R&&(r=X("menu-item"+(R.$45b||"NaN")))}if(r!=w){if(w)for(var e=w;e;){if(e[q]=e[q].replace(" menu-item-hover",""),e[q].indexOf("disabled")<0){var f=$.getItemByProperty("_id",e.getAttribute("data-id"));null!=f.background?f.background instanceof Function?B(e,"background-color",f.background.call($,f)):B(e,"background-color",f.background):B(e,"background-color",L.contextMenuBackground),B(e,"color",L.contextMenuLabelColor)}var T=t("submenu"+e.getAttribute("data-id"));T&&B(T,k,"hidden");var u=e.parentNode;e=X("menu-item"+(u.$45b||"NaN"))}if(r){for(var Y=r,Z=[];Y;){Y[q]+=" menu-item-hover",Y[q].indexOf("disabled")<0&&(B(Y,"background-color",L.contextMenuHoverBackground),B(Y,"color",L.contextMenuHoverLabelColor));var c=t("submenu"+Y.getAttribute("data-id"));c&&(B(c,k,"visible"),Z.push(c));var u=Y.parentNode;Y=X("menu-item"+(u.$45b||"NaN"))}Z.reverse(),Z.forEach(function(W){a(W)})}}$.$19b=r,$.$20b=r?r.parentNode:x.children[0]}},handle_mouseup:function(q){this.handle_touchend(q)},handleWindowTouchEnd:function(){var Y=this;Y.$28b!=C&&(A(Y.$28b),delete Y.$28b),Y.$29b!=C&&(H(Y.$29b),delete Y.$29b),delete Y.$34b,delete Y.$30b,delete Y.$35b},handleWindowMouseUp:function(E){this.handleWindowTouchEnd(E)},handle_mousemove:function($){this.handle_touchmove($)},handle_touchmove:function(B){if(!W()&&o(B)){for(var a=this,S=a.getView().children,x=C,P=0;P<S.length;P++){var g=S[P];if(g.contains(B.target)){x=g;break}}var Z=a.$30b,q=E?{x:G(B).pageX,y:G(B).pageY}:{x:B.pageX,y:B.pageY};x&&Z&&s(Z,q)>2&&($(a,B),a.$34b=x,a.$35b=x.$18b)}},handleWindowTouchMove:function(k){k.preventDefault();var L=this,r=L.$11b,i=L.$34b,V=L.$35b,y=L.$30b;if(y&&i){var $=E?{x:G(k).pageX,y:G(k).pageY}:{x:k.pageX,y:k.pageY},F=$.y-y.y;F>0?r.scrollUp(i,i.$18b-(V-F)):r.scrollDown(i,V-F-i.$18b)}},handleWindowMouseMove:function(N){this.handleWindowTouchMove(N)},$10b:function(O,m){O.preventDefault();for(var P=this,a=P.getView().children,R=C,t=0;t<a.length;t++){var I=a[t];if(I.contains(O.target)){R=I;break}}if(R){var U=this.$11b,D=U.getRowHeight();Math.abs(m)>.05&&(m>0?U.scrollUp(R,m*D):0>m&&U.scrollDown(R,-m*D))}},handle_mousewheel:function(U){this.$10b(U,U.wheelDelta/40)},handle_DOMMouseScroll:function(o){this.$10b(o,-o.detail)},$44b:function(h){this.getView().contains(h.target)||this.$11b.hide()},$41b:function(O){this.$11b.show(O)},$4b:function(s,j){var E=this.$11b;if(j=j||E._items,j&&j.length&&s.keyCode){var e=[s.keyCode];s.shiftKey&&e.push(16),s.ctrlKey&&e.push(17),s.altKey&&e.push(18),/mac/.test(i.navigator?i.navigator.userAgent.toLowerCase():"")?s.metaKey&&e.push(17):s.metaKey&&e.push(91),e.sort();var Z=e.join(),G=E.$17b(j,function($){if($.key){var w=$.key.slice(0);return w.sort(),Z===w.join()}});if(G){G.preventDefault!==!1&&s.preventDefault();var k=!1;G.disabled instanceof Function?k=G.disabled.call(E,G):G.disabled===!0&&(k=!0),k||E.$1b(G,s)}}},$39b:function(w){var f=this,W=G(w);f.$32b={x:W.pageX,y:W.pageY}},$38b:function(B){var C=this,S=G(B);C.$31b={x:S.pageX,y:S.pageY},C.$33b=O(function(){C.$31b&&(C.$32b?s(C.$31b,C.$32b)<10&&C.$11b.show(B):C.$11b.show(B)),delete C.$33b,delete C.$31b,delete C.$32b},600)},$40b:function(){var v=this;v.$33b!=C&&(A(v.$33b),delete v.$33b,delete v.$31b,delete v.$32b)}}),S.widget.ContextMenu=function(R){var o=this,p=o._view=D.createView(null,o);p[q]="ht-widget-contextmenu",o.setItems(R),o.$13b=new a(o),B(p,"font",L.contextMenuLabelFont),B(p,l,e),B(p,"cursor","default"),B(p,"-webkit-"+d,c),B(p,"-moz-"+d,c),B(p,"-ms-"+d,c),B(p,d,c),B(p,"box-sizing","border-box"),B(p,"-moz-box-sizing","border-box"),L.baseZIndex!=C&&B(p,"z-index",U(L.baseZIndex)+2+""),o.$3b=function(L){o.$13b.$4b(L)}},_("ContextMenu",v,{$5b:0,_items:C,$21b:C,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var w=this,F=w._enableGlobalKey;F===!1&&(z(u(),"keydown",w.$3b),w._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,P(u(),"keydown",this.$3b)},setItems:function(e){this._items=e},getItems:function(){return this._items},setVisibleFunc:function(W){this.$16b=W},setLabelMaxWidth:function(n){this.$43b=n},$1b:function(K,E){var d=this;if("check"===K.type)K.selected=!K.selected;else if("radio"===K.type){var y=K.groupId;d.$17b(d._items,function(P){P.groupId===y&&(P.selected=!1)}),K.selected=!0}if(d.hide(),K.action)K.action.apply(K.scope||d,[K,E]);else if(K.href){var n=K.linkTarget||"_self";i.open(K.href,n)}},getItemById:function(F){return this.getItemByProperty("id",F)},setItemVisible:function(k,A){var _=this.getItemById(k);_&&(_.visible=A)},getItemByProperty:function(N,$,i){var m=this;if(i=i||m._items,!i||0===i.length)return C;var H=m.$17b(i,function(I){return I[N]===$});return H||C},scrollUp:function(m,E){var F=this;if(E=E==C?20:E,E=U(E),0!==E){var s=0;m.$18b>E&&(s=m.$18b-E),F.$42b(m,s),m.scrollTop=s,m.$18b=s}},scrollDown:function(q,Y){var B=this;if(Y=Y==C?20:Y,Y=U(Y),0!==Y){var $=q.$22b,P=q.$23b,o=$-P;P+q.$18b+Y<$&&(o=q.$18b+Y),B.$42b(q,o),q.scrollTop=o,q.$18b=o}},$42b:function(z,H){H=H==C?z.$18b:H;var f=z.$24b,x=z.$25b;f&&(B(f,"top",H+n),0==H?B(f,t,c):B(f,t,"block")),x&&(B(x,"bottom",-H+n),H==z.$22b-z.$23b?B(x,t,c):B(x,t,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function(F,K){for(var g=0;g<F.length;g++){var P=F[g];if(K(P))return P;if(P.items){var f=this.$17b(P.items,K);if(f)return f}}},$2b:function(y,j){for(var u=this,E=0;E<y.length;E++){u.$5b++;var _=y[E];if(_.visible!==!1&&!(L.isFunction(_.visible)&&_.visible()===!1||u.$16b&&!u.$16b.call(u,_))){var A=f("li"),Y=u.$5b+"";if(B(A,"white-space","nowrap"),B(A,t,"block"),"separator"===_||_.separator===!0){var d=Z();d[q]="separator",B(d,X,L.contextMenuSeparatorWidth+n),B(d,"background",L.contextMenuSeparatorColor),b(A,d)}else{_._id=Y,A.setAttribute("data-id",Y);var c=f("span"),i=f("span"),Q=F(),v=Z();if(B(c,t,"inline-block"),B(c,X,"1.2em"),B(i,t,"inline-block"),B(i,X,"1.2em"),B(i,"line-height","1.2em"),Q[q]="prefix",B(Q,t,"inline-block"),B(Q,M,"1em"),B(Q,X,"1em"),B(Q,"vertical-align","middle"),B(Q,I,"0 0.2em"),"check"===_.type&&_.selected?Q[q]+=" check-prefix":"radio"===_.type&&_.selected&&(Q[q]+=" radio-prefix"),b(A,Q),_.icon){var H=F();H[q]="contextmenu-item-icon",B(H,t,"inline-block"),B(H,X,"1.2em"),B(H,M,"1.2em"),B(H,"margin-right","0.2em"),B(H,"float","left"),H.$50b=_.icon,H._item=_,b(c,H)}if(i[r]=_.label,b(c,i),b(A,c),v[q]="suffix",B(v,t,"inline-block"),B(v,"margin-left","1em"),B(v,"margin-right","0.4em"),B(v,"text-align","right"),B(v,"font-size","75%"),_.items&&(v[r]=L.contextMenuSubmenuMark),_.suffix&&(v[r]=_.suffix),b(A,v),A[q]="menu-item menu-item"+Y,null!=_.background?_.background instanceof Function?B(A,"background-color",_.background.call(u,_)):B(A,"background-color",_.background):B(A,"background-color",L.contextMenuBackground),B(A,"color",L.contextMenuLabelColor),B(A,h,"3px 0"),_.disabled instanceof Function){var G=_.disabled.call(u,_);G&&(A[q]+=" disabled",B(A,"color",L.contextMenuDisabledLabelColor))}else _.disabled&&(A[q]+=" disabled",B(A,"color",L.contextMenuDisabledLabelColor));if(_.items){u.$21b||(u.$21b=new S.List);var a=f("ul");a[q]="submenu"+Y,a.$45b=Y,B(a,k,"hidden"),B(a,l,e),b(u._view,a),u.$21b.add(a),u.$2b(_.items,a)}}b(j,A)}}},rebuild:function(){var v=this,k=v._items,G=v._view;if(G&&(G[r]="",v.$21b=C,v.$5b=0,v.$19b=C,v.$20b=C,G.$26b=C,k&&0!==k.length)){var R=f("ul",v._r);b(G,R),v.$2b(k,R)}},addTo:function(b){if(b){var k=this,s=k.$13b;if(k.$12b=b,k.$9b=function(i){s.$44b(i)},k.$27b=function(F){s.$41b(F)},E){var Q=k.$6b=function(K){s.$38b(K)},R=k.$7b=function(w){s.$39b(w)},x=k.$8b=function($){s.$40b($)};z(b,"touchstart",Q,!0),z(b,"touchmove",R),z(b,"touchend",x)}else z(b,"contextmenu",k.$27b)}},showOnView:function(d,C,B){d=d.getView?d.getView():d;var f=L.getWindowInfo(),h=d.getBoundingClientRect();this.show(h.left+f.left+C,h.top+f.top+B)},show:function(J,w,I){var F=this,I=I==C?!0:!1,K=F._view;if(K){if(F.invalidate(),1===arguments.length){var H=J;if(E){var Y=G(H);J=Y.pageX,w=Y.pageY}else J=H.pageX,w=H.pageY}var W=L.getWindowInfo(),U=W.width,f=W.height,c=W.left,v=W.top,m={pageX:J,pageY:w,clientX:J-c,clientY:w-v,target:1,originEvent:H},d=m.clientX,g=m.clientY,P=function(h){h.style.height=f-6+n;var d=Z(),S=Z(),s=function(X){B(X,l,e),B(X,"text-align","center"),B(X,M,"100%"),B(X,"font-size",10+n),B(X,"padding","2px 0"),B(X,"border","0px solid "+L.contextMenuScrollerBorderColor),B(X,"background-color",L.contextMenuScrollerColor1),X.style.backgroundImage="-webkit-linear-gradient(top, "+L.contextMenuScrollerColor1+", "+L.contextMenuScrollerColor2+")",X.style.backgroundImage="linear-gradient(to bottom, "+L.contextMenuScrollerColor1+", "+L.contextMenuScrollerColor2+")"};d[q]="menu-arrow-item menu-arrow-item-top",S[q]="menu-arrow-item menu-arrow-item-bottom",s(d),B(d,"top",x),B(d,"left",x),B(d,"border-bottom-width",1+n),d[r]="▲",s(S),B(S,"bottom",x),B(S,"left",x),B(S,"border-top-width",1+n),S[r]="▼",h.$24b=d,h.$25b=S,h.$18b=h.scrollTop,h.$22b=h.scrollHeight,h.$23b=h.clientHeight,b(h,d),b(h,S),F.$42b(h)};F.beforeShow&&F.beforeShow(m);var $=F._items;if($&&(H&&H.preventDefault(),$.length)){F.rebuild(),L.appendToScreen(K),K.$26b=R(K,".menu-item");var j=K.children[0];j.offsetHeight>f&&P(j);var h=g+(I?1:0),D=d+(I?1:0),S=function(_){for(var P=0,v=0,q=0,h=F.$43b;q<_.children.length;q++){var i=_.children[q];if(i.getAttribute("data-id")){var I=i.children[1],A=i.children[2],e=I.children;if(h){var Y=e[0];e.length>1&&(Y=e[1]),Y.offsetWidth>h&&(Y[r]="<marquee scrollamount='3'>"+Y[r]+"</marquee>",Y.children[0].style.verticalAlign="text-bottom",B(Y,M,h+n),B(Y,t,"inline-block"))}var s=I.offsetWidth,Q=A.offsetWidth;s>P&&(P=s),Q>v&&(v=Q)}}for(q=0;q<_.children.length;q++){var i=_.children[q];if(i.getAttribute("data-id")){var I=i.children[1],A=i.children[2],m=I.children[0],L=I.children[1];!L&&m.style.width&&B(m,M,P+n),B(I,M,P+n),B(A,M,v+n)}}};S(j);var k=g+3+K.offsetHeight,V=d+3+K.offsetWidth;k>f?B(K,Q,h-(k-f)+v+n):B(K,Q,h+v+n),V>U?B(K,N,D-(V-U)+c+n):B(K,N,D+c+n);var i=F.$21b;i&&i.each(function(l){S(l),l.offsetHeight>f&&P(l)}),F.$9b&&z(u(),E?"touchstart":"mousedown",F.$9b,!0),F.afterShow&&F.afterShow(m),F.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=C:!1},getRelatedView:function(){return this.$12b},hide:function(){var c=this,v=c._view;v&&v.parentNode&&(T(v.parentNode,v),P(u(),E?"touchstart":"mousedown",c.$9b,!0),c.afterHide&&c.afterHide())},dispose:function(){var z=this,q=z.$12b,p=z._view;p&&(p.parentNode&&T(p.parentNode,p),z.disableGlobalKey(),q&&(E?(P(q,"touchstart",z.$6b,!0),P(q,"touchmove",z.$7b),P(q,"touchend",z.$8b)):P(q,"contextmenu",z.$27b)),z._view=z._items=z.$21b=z.$19b=z.$12b=z.beforeShow=z.afterShow=z.afterHide=z.$9b=z.$3b=z.$6b=z.$7b=z.$8b=z.$27b=C)},$46b:function(w,v,s,i,B){var M=D.initContext(w);D.translateAndScale(M,0,0,1),M.clearRect(0,0,s,i),L.drawStretchImage(M,L.getImage(v),"fill",0,0,s,i,B,this),M.restore()},$47b:function(){var e,_,M,J=this,o=J._view;if(J.isShowing()){var x=R(o,".check-prefix");for(M=0;M<x.length;M++){var h=x[M];e=h.clientWidth,_=h.clientHeight,h.$48b=e,h.$49b=_,D.setCanvas(h,e,_)}var B=R(o,".radio-prefix");for(M=0;M<B.length;M++){var i=B[M];e=i.clientWidth,_=i.clientHeight,i.$48b=e,i.$49b=_,D.setCanvas(i,e,_)}var P=R(o,".contextmenu-item-icon");for(M=0;M<P.length;M++){var L=P[M];e=L.clientWidth,_=L.clientHeight,L.$48b=e,L.$49b=_,D.setCanvas(L,e,_)}}},validateImpl:function(){var i,j,s,q=this,F=q._view;if(q.isShowing()){var t=R(F,".check-prefix");for(s=0;s<t.length;s++){var d=t[s];i=d.$48b,j=d.$49b,i&&j&&q.$46b(d,L.contextMenuCheckIcon,i,j)}var o=R(F,".radio-prefix");for(s=0;s<o.length;s++){var n=o[s];i=n.$48b,j=n.$49b,i&&j&&q.$46b(n,L.contextMenuRadioIcon,i,j)}var G=R(F,".contextmenu-item-icon");for(s=0;s<G.length;s++){var J=G[s];i=J.$48b,j=J.$49b,i&&j&&q.$46b(J,L.getImage(J.$50b),i,j,J._item)}}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);